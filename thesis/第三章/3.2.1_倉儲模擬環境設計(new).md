# 3.2.1 倉儲模擬環境設計

為對交通控制策略進行有效評估，本研究首先建構了一個高擬真度的倉儲模擬環境。此環境不僅定義了物理空間的佈局，還包含了多種動態實體及其互動規則，共同構成了一個複雜的機器人移動履行系統（RMFS）。本節將詳細闡述其設計。

### 1. 物理環境與佈局

模擬倉儲建立在一個二維的離散化網格之上，每個網格單元均有其特定功能。整體佈局採用了功能分區的設計，以確保運作流程的有序性。

-   **中央儲存區**: 位於倉庫中心，由大量**儲位 (Pod Location)** 密集排列而成。此區域的通道被設計為嚴格的**單向通道 (One-way Aisles)**，水平與垂直通道的流動方向交錯排列，此設計從物理層面極大地簡化了交通管理的複雜性，旨在減少機器人對向行駛時的潛在衝突。
-   **工作站區**: 分佈在倉庫的兩側。一側為**揀貨站 (Picking Station)**，是訂單履行的出口；另一側為**補貨站 (Replenishment Station)**，是貨物進入系統的入口。
-   **充電站 (Charging Station)**: 散佈在儲存區內，由部分儲位轉化而來，供機器人自主充電。

**【圖表建議：圖 3.2.1 - 倉儲佈局示意圖】**
為直觀展示佈局，建議此處插入一張示意圖，用不同顏色標示出儲存區、揀貨區、補貨區與充電站，並用箭頭清晰標示出單向通道的流動方向。

### 2. 核心實體與生命週期

系統的動態行為由多種核心實體之間的互動所驅動。

-   **機器人 (Robot)**: 作為系統中最核心的活動單元，機器人具備一套複雜的狀態機來管理其工作流程，包括 `閒置 (idle)`、`前往貨架 (taking_pod)`、`運送貨架 (delivering_pod)`、`在站處理 (station_processing)` 及 `返回貨架 (returning_pod)` 等狀態。本研究為機器人建立了精細的物理與能量模型，其能耗計算不僅考慮了負載，還涵蓋了啟動成本與再生制動（剎車能量回收），為能源效率評估提供了堅實基礎。此外，機器人具備基於優先級的自主避障邏輯，能夠在一定程度上自主解決局部衝突。

**【圖表建議：圖 3.2.2 - 機器人狀態轉換圖】**
為清晰展示機器人的工作流程，建議此處插入一張 UML 狀態機圖，描繪其核心狀態以及觸發狀態轉換的事件（如「分配新任務」、「到達工作站」等）。

-   **貨架 (Pod)**: 是儲存貨物 (SKU) 的移動載體。每個貨架可存放多種 SKU，並記錄了每種 SKU 的當前數量與補貨閾值。當存貨量低於閾值時，系統將自動觸發對應的補貨任務。

-   **工作站 (Station)**: 是人機協作的節點。當機器人將貨架運送至工作站後，系統會模擬工人的揀貨或補貨延遲。為應對高流量，工作站還設計了動態路徑調整機制，當站內機器人過多時會啟用備用長路徑以緩解擁塞。

**【圖表建議：圖 3.2.3 - 倉儲標示圖】**
### 3. 訂單與任務流程

模擬的驅動力來源於訂單。一個**訂單 (Order)** 代表一份客戶需求，包含多種需要揀選的 SKU。系統會將訂單分解為一個或多個**任務 (Job)**。一個任務的核心是「將指定的貨架運送到指定的工作站」，這是可直接分配給機器的最小工作單元。整個流程如下：
1.  系統接收訂單。
2.  訂單所需 SKU 被定位到特定的貨架上。
3.  系統生成一個或多個任務，並將其放入任務佇列。
4.  閒置的機器人從佇列中領取任務，開始其取貨、送貨、返程的工作生命週期。
5.  當一個訂單所需的所有 SKU 都被成功送達工作站後，該訂單被標記為完成。

### 4. 交叉路口設計與分類

除了宏觀的佈局，本研究對倉儲內的微觀交通節點——交叉路口，進行了明確的分類與定義，這對於後續的控制器設計至關重要。

-   **標準十字路口 (Standard Intersection)**: 這是構成倉儲交通網絡主體的基本單元，由兩條相互垂直的單向通道匯集而成。所有非特殊定義的路口均屬於此類。

-   **關鍵路口 (Critical Intersection)**: 根據其在倉儲佈局中的戰略重要性，一部分路口被標記為「關鍵路口」。這些路口是直接連接到**工作站（揀貨站或補貨站）**的入口或出口路徑上的交通節點。它們是進出工作站的必經之路，構成了整個倉儲系統中最主要的交通**瓶頸 (Bottleneck)**。對這些路口的管理效率，將直接影響工作站的吞吐量、機器人排隊長度，並可能引發向儲存區蔓延的**交通回堵 (Spillback)** 現象。因此，在強化學習的獎勵函數設計中（詳見 3.4.5 節），這些路口將被賦予更高的權重，以引導智能體優先學習對其進行有效管理。

**【圖表建議：圖 3.2.4 - 倉儲交叉路口分類與關鍵路口標示圖】**
為直觀展示不同路口的地理分佈，建議此處插入一張與圖 3.2.1 風格一致的倉儲佈局圖。在圖中，應使用不同的符號或顏色清晰標示出標準十字路口與所有關鍵路口的位置，特別是與揀貨站和補貨站的鄰接關係。 