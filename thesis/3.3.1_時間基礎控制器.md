# 3.3.1 時間基礎控制器

時間基礎控制器（`TimeBasedController`）是最基礎的靜態交通控制策略。其核心思想源於傳統的都市交通號誌系統，完全不考慮路口的實時交通流量或任何動態變化，僅依賴一個預先設定的、固定的時間週期來循環切換水平與垂直方向的通行權。這種方法的優點在於其極致的簡單性與可預測性，但缺點也同樣明顯——無法適應交通需求的波動，容易在交通繁忙時造成不必要的等待，或在交通稀少時浪費通行時間。

### 設計原理與決策邏輯

此控制器的運作完全由三個參數決定：水平方向綠燈時間（\(T_{H\_green}\)）、垂直方向綠燈時間（\(T_{V\_green}\)），以及由兩者加總構成的完整訊號週期長度（\(T_{cycle}\)）。

\[
T_{cycle} = T_{H\_green} + T_{V\_green}
\]

在模擬運行的任何一個時間刻（tick），控制器會透過取餘運算來判斷當前處於訊號週期中的哪個時間點（\(t_{pos}\)），其計算方式如下：

\[
t_{pos} = \text{tick} \mod T_{cycle}
\]

根據 \(t_{pos}\) 的值，控制器作出通行方向的決策。如果 \(t_{pos}\) 小於水平方向的綠燈時間 \(T_{H\_green}\)，則給予水平方向通行權；反之，則給予垂直方向通行權。決策規則可表示為：

\[
\text{Direction} = 
\begin{cases} 
\text{Horizontal,} & \text{if } t_{pos} < T_{H\_green} \\
\text{Vertical,} & \text{if } t_{pos} \geq T_{H\_green}
\end{cases}
\]

在我們的倉儲環境中，由於貨架（Pod）主要沿著水平方向排列，機器人在水平方向的移動頻率與數量遠高於垂直方向。為了配合此一特性，在參數設定上，我們給予水平方向更長的綠燈時間（例如，\(T_{H\_green} = 70\) ticks），而垂直方向的綠燈時間則相對較短（例如，\(T_{V\_green} = 30\) ticks），以期在不考慮即時狀態下，達到一個初步的流量平衡。

---
**【圖表建議：圖 3.3.1 - 時間基礎控制器訊號週期示意圖】**

建議在此處插入一張時間軸圖，清晰地展示 \(T_{cycle}\) 的構成，並標示出 \(T_{H\_green}\) 和 \(T_{V\_green}\) 的區間，以及在不同區間內對應的通行方向決策（Horizontal/Vertical）。
