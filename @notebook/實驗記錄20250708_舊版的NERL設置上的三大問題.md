NERL æ¨¡å‹é™åˆ¶æ·±åº¦åˆ†æ

  1ï¸âƒ£ è³‡è¨Šå­¤å³¶å•é¡Œ - æœ€åš´é‡çš„é™åˆ¶

  ğŸš¨ å…·é«”å•é¡Œï¼š

  # ç›®å‰çš„ç‹€æ…‹ç²å–åªè€ƒæ…®å–®ä¸€è·¯å£
  def get_state(self, intersection, tick, warehouse):
      # åªçœ‹ç•¶å‰è·¯å£çš„æ©Ÿå™¨äººæ•¸é‡ã€ç­‰å¾…æ™‚é–“
      h_count = len(intersection.horizontal_robots)
      v_count = len(intersection.vertical_robots)
      # âŒ ç„¡æ³•çœ‹åˆ°ç›¸é„°è·¯å£çš„ç‹€æ³

  ğŸ’¥ å¯¦éš›å½±éŸ¿ï¼š

  1. é€£é–å¡è»Šï¼šä¸€å€‹è·¯å£æ”¾è¡Œå¯èƒ½å°è‡´ä¸‹æ¸¸è·¯å£ç¬é–“æ“å µ
  2. æ³¢æµªæ•ˆæ‡‰ï¼šç„¡æ³•é æ¸¬äº¤é€šæµçš„ç§»å‹•æ–¹å‘
  3. å±€éƒ¨æœ€ä½³åŒ–ï¼šæ¯å€‹è·¯å£å„è‡ªæœ€ä½³åŒ–ï¼Œæ•´é«”å¯èƒ½æ¬¡ä½³

  ğŸ“Š èˆ‰ä¾‹èªªæ˜ï¼š

  è·¯å£A â† [5å€‹æ©Ÿå™¨äºº] â† è·¯å£B â† [10å€‹æ©Ÿå™¨äºº] â† è·¯å£C
  - è·¯å£B åªçœ‹åˆ°è‡ªå·±æœ‰10å€‹æ©Ÿå™¨äººç­‰å¾…
  - ä¸çŸ¥é“ è·¯å£Aå·²ç¶“æ“å µï¼Œæ”¾è¡Œå¾Œæœƒæ›´åš´é‡
  - ä¸çŸ¥é“ è·¯å£Cå³å°‡é€ä¾†æ›´å¤šæ©Ÿå™¨äºº

â— Update Todos
  â¿  â˜’ åˆ†æè³‡è¨Šå­¤å³¶å•é¡Œçš„å½±éŸ¿å’Œè§£æ±ºæ–¹æ¡ˆ
     â˜ åˆ†æç¡¬ç·¨ç¢¼æ­£è¦åŒ–çš„å•é¡Œ
     â˜ åˆ†æçå‹µå‡½æ•¸çš„ä¸è¶³
     â˜ æä¾›æ”¹é€²å»ºè­°å’Œå¯¦ç¾æ–¹æ¡ˆ

â— 2ï¸âƒ£ ç¡¬ç·¨ç¢¼æ­£è¦åŒ–å•é¡Œ - æ³›åŒ–èƒ½åŠ›é™åˆ¶

  ğŸ”§ ç›®å‰çš„ç¡¬ç·¨ç¢¼åƒæ•¸ï¼š

  # ai/controllers/nerl_controller.py:215-219
  time_norm = min(time_since_change / 20.0, 1.0)    # 
  å‡è¨­20å€‹tickæ˜¯æœ€å¤§å€¼
  h_count_norm = min(h_count / 10.0, 1.0)           # 
  å‡è¨­æœ€å¤š10å€‹æ©Ÿå™¨äºº
  v_count_norm = min(v_count / 10.0, 1.0)
  h_wait_norm = min(h_wait_time / 50.0, 1.0)        # 
  å‡è¨­æœ€é•·ç­‰å¾…æ™‚é–“ç‚º50
  v_wait_norm = min(v_wait_time / 50.0, 1.0)

  âš ï¸ å•é¡Œåˆ†æï¼š

  | åƒæ•¸     | ç¡¬ç·¨ç¢¼å€¼     | å•é¡Œ           | å¯¦éš›æƒ…æ³            |
  |--------|----------|--------------|-----------------|
  | æœ€å¤§æ©Ÿå™¨äººæ•¸ | 10å€‹      | ğŸš¨ å€‰å„²ç¹å¿™æ™‚å¯èƒ½è¶…é | å¯¦éš›å¯èƒ½20-30å€‹
        |
  | æœ€å¤§ç­‰å¾…æ™‚é–“ | 50 ticks | ğŸš¨ å¡è»Šæ™‚å¯èƒ½è¶…é   | å¯¦éš›å¯èƒ½100+ ticks
    |
  | ä¿¡è™ŸæŒçºŒæ™‚é–“ | 20 ticks | ğŸš¨ å¯èƒ½éœ€è¦æ›´é•·ç¶ ç‡ˆ  | å¯¦éš›å¯èƒ½éœ€è¦50+
  ticks |

  ğŸ’¥ å¯¦éš›å½±éŸ¿ï¼š

  1. è³‡è¨Šæˆªæ–·ï¼šè¶…éé–¾å€¼çš„ä¿¡æ¯è¢«æˆªæ–·ç‚º1.0ï¼Œå¤±å»å€åˆ†åº¦
  2. æ¨¡å‹ç›²å€ï¼šç„¡æ³•è™•ç†æ¥µç«¯ä½†åˆç†çš„äº¤é€šç‹€æ³
  3. æ€§èƒ½ä¸Šé™ï¼šé™åˆ¶äº†æ¨¡å‹åœ¨é«˜è² è¼‰ä¸‹çš„è¡¨ç¾

â— Update Todos
  â¿  â˜’ åˆ†æè³‡è¨Šå­¤å³¶å•é¡Œçš„å½±éŸ¿å’Œè§£æ±ºæ–¹æ¡ˆ
     â˜’ åˆ†æç¡¬ç·¨ç¢¼æ­£è¦åŒ–çš„å•é¡Œ
     â˜ åˆ†æçå‹µå‡½æ•¸çš„ä¸è¶³
     â˜ æä¾›æ”¹é€²å»ºè­°å’Œå¯¦ç¾æ–¹æ¡ˆ

â— 3ï¸âƒ£ çå‹µå‡½æ•¸ç°¡åŒ–å•é¡Œ - ç›®æ¨™ä¸å…¨é¢

  ğŸ¯ ç›®å‰çš„çå‹µå‡½æ•¸ï¼š

  # netlogo.py:600-612
  é©æ‡‰åº¦ = èƒ½æºæ•ˆç‡ - åœæ­¢å•Ÿå‹•æ‡²ç½°
         = (å®Œæˆè¨‚å–®æ•¸ / ç¸½èƒ½æºæ¶ˆè€—) - (0.01 Ã— åœæ­¢å•Ÿå‹•æ¬¡æ•¸)

  âŒ ç¼ºå¤±çš„é‡è¦æŒ‡æ¨™ï¼š

  | ç¼ºå¤±æŒ‡æ¨™    | é‡è¦æ€§  | å½±éŸ¿          |
  |---------|------|-------------|
  | ç­‰å¾…æ™‚é–“å…¬å¹³æ€§ | ğŸ”´ é«˜ | æŸäº›æ©Ÿå™¨äººå¯èƒ½é¤“æ­»ç­‰å¾… |
  | ç­‰å¾…æ™‚é–“è®Šç•°æ•¸ | ğŸŸ¡ ä¸­ | æœå‹™å“è³ªä¸ç©©å®š     |
  | æ­»é–æª¢æ¸¬    | ğŸ”´ é«˜ | ç³»çµ±å¯èƒ½å®Œå…¨å¡æ­»    |
  | å®Œæˆç‡     | ğŸŸ¡ ä¸­ | åªçœ‹å®Œæˆæ•¸ä¸çœ‹æˆåŠŸç‡  |
  | æ©Ÿå™¨äººåˆ©ç”¨ç‡  | ğŸŸ¡ ä¸­ | æ©Ÿå™¨äººå¯èƒ½é–’ç½®éå¤š   |

  ğŸš¨ å…·é«”å•é¡Œï¼š

  1. å…¬å¹³æ€§å•é¡Œï¼š
  # å¯èƒ½ç™¼ç”Ÿçš„æƒ…æ³
  æ©Ÿå™¨äººA: ç­‰å¾…æ™‚é–“ = 200 ticks  ğŸ˜¢
  æ©Ÿå™¨äººB: ç­‰å¾…æ™‚é–“ = 5 ticks   ğŸ˜Š
  # ä½†çå‹µå‡½æ•¸åªçœ‹å¹³å‡å€¼æˆ–ç¸½å’Œ
  2. ç›®æ¨™è¡çªï¼š
  # æ¥µç«¯ç­–ç•¥å¯èƒ½ç²å¾—é«˜åˆ†
  ç­–ç•¥1: å®Œæˆå¾ˆå¤šè¨‚å–®ï¼Œä½†èƒ½æºæ¶ˆè€—å·¨å¤§ â†’ ä½åˆ†
  ç­–ç•¥2: ç¯€èƒ½ä½†å®Œæˆå¾ˆå°‘è¨‚å–® â†’ ä½åˆ†
  ç­–ç•¥3: å®Œå…¨ä¸å‹•ä½œ â†’ é¿å…æ‡²ç½°ä½†ç„¡è²¢ç»

â— Update Todos
  â¿  â˜’ åˆ†æè³‡è¨Šå­¤å³¶å•é¡Œçš„å½±éŸ¿å’Œè§£æ±ºæ–¹æ¡ˆ
     â˜’ åˆ†æç¡¬ç·¨ç¢¼æ­£è¦åŒ–çš„å•é¡Œ
     â˜’ åˆ†æçå‹µå‡½æ•¸çš„ä¸è¶³
     â˜ æä¾›æ”¹é€²å»ºè­°å’Œå¯¦ç¾æ–¹æ¡ˆ

â— ğŸš€ æ”¹é€²å»ºè­°èˆ‡å¯¦ç¾æ–¹æ¡ˆ

  ğŸ’¡ è§£æ±ºæ–¹æ¡ˆå„ªå…ˆç´šæ’åº

  | å•é¡Œ     | å½±éŸ¿ç¨‹åº¦ | å¯¦ç¾é›£åº¦  | å»ºè­°å„ªå…ˆç´š   |
  |--------|------|-------|---------|
  | çå‹µå‡½æ•¸æ”¹é€² | ğŸ”´ é«˜ | ğŸŸ¢ å®¹æ˜“ | ğŸ¥‡ ç¬¬1å„ªå…ˆ |
  | è‡ªé©æ‡‰æ­£è¦åŒ– | ğŸŸ¡ ä¸­ | ğŸŸ¢ å®¹æ˜“ | ğŸ¥ˆ ç¬¬2å„ªå…ˆ |
  | è³‡è¨Šå­¤å³¶è§£æ±º | ğŸ”´ é«˜ | ğŸ”´ å›°é›£ | ğŸ¥‰ ç¬¬3å„ªå…ˆ |

  ---
    ---
  ğŸ¯ æ–¹æ¡ˆ1ï¼šæ”¹é€²çå‹µå‡½æ•¸ï¼ˆç«‹å³å¯å¯¦ç¾ï¼‰

  æ–°çš„å¤šç›®æ¨™çå‹µå‡½æ•¸ï¼š

  def calculate_improved_fitness(warehouse):
      # åŸºç¤æ•ˆç‡æŒ‡æ¨™
      completed_orders = len([j for j in
  warehouse.job_manager.jobs if j.is_finished])
      total_orders = len(warehouse.job_manager.jobs)
      total_energy = warehouse.total_energy
      stop_and_go = warehouse.stop_and_go

      # è¨ˆç®—ç­‰å¾…æ™‚é–“çµ±è¨ˆ
      wait_times = []
      for intersection in
  warehouse.intersection_manager.intersections:
          for robot in
  list(intersection.horizontal_robots.values()) +
  list(intersection.vertical_robots.values()):
              if
  robot.current_intersection_start_time:
                  wait_time = warehouse._tick -
  robot.current_intersection_start_time
                  wait_times.append(wait_time)

      # å¤šç¶­åº¦çå‹µ
      completion_rate = completed_orders /
  max(total_orders, 1)           # å®Œæˆç‡
      energy_efficiency = completed_orders /
  (total_energy + 1e-6)       # èƒ½æºæ•ˆç‡
      fairness_penalty = np.std(wait_times) if
  wait_times else 0         # å…¬å¹³æ€§ï¼ˆæ¨™æº–å·®ï¼‰
      max_wait_penalty = max(wait_times) if
  wait_times else 0            # æœ€å¤§ç­‰å¾…æ‡²ç½°
      stability_penalty = 0.01 * stop_and_go
                       # ç©©å®šæ€§æ‡²ç½°

      # åŠ æ¬Šçµ„åˆ
      fitness = (
          0.4 * completion_rate +           # 40% 
  å®Œæˆç‡
          0.3 * energy_efficiency +         # 30% 
  èƒ½æºæ•ˆç‡  
          -0.1 * (fairness_penalty / 50) +  # 10% 
  å…¬å¹³æ€§æ‡²ç½°
          -0.1 * (max_wait_penalty / 100) + # 10% 
  æœ€å¤§ç­‰å¾…æ‡²ç½°
          -0.1 * stability_penalty          # 10% 
  ç©©å®šæ€§æ‡²ç½°
      )

      return fitness

  ---
  âš™ï¸ æ–¹æ¡ˆ2ï¼šè‡ªé©æ‡‰æ­£è¦åŒ–ï¼ˆä¸­ç­‰å¯¦ç¾é›£åº¦ï¼‰

  é‹è¡Œæ™‚çµ±è¨ˆæ­£è¦åŒ–ï¼š

  class AdaptiveNormalizer:
      def __init__(self):
          self.running_max = {
              'robot_count': 5,    # åˆå§‹å€¼
              'wait_time': 25,     # åˆå§‹å€¼
              'duration': 10       # åˆå§‹å€¼
          }
          self.update_alpha = 0.01  # æ›´æ–°é€Ÿåº¦

      def normalize_and_update(self, value, key):
          # æ›´æ–°é‹è¡Œæœ€å¤§å€¼
          self.running_max[key] = max(
              self.running_max[key],
              value * 1.1  # ç¨å¾®æ”¾å¯¬ä»¥é¿å…æˆªæ–·
          )

          # ä½¿ç”¨é‹è¡Œæœ€å¤§å€¼æ­£è¦åŒ–
          normalized = min(value /
  self.running_max[key], 1.0)
          return normalized

  ---
  ğŸŒ æ–¹æ¡ˆ3ï¼šè§£æ±ºè³‡è¨Šå­¤å³¶ï¼ˆé«˜é›£åº¦ï¼Œå»ºè­°åˆ†éšæ®µï¼‰

  éšæ®µ3Aï¼šç›¸é„°è·¯å£è³‡è¨Šæ“´å±•

  def get_extended_state(self, intersection, tick, 
  warehouse):
      # åŸæœ‰8ç¶­ç‹€æ…‹
      basic_state = self.get_state(intersection,
  tick, warehouse)

      # æ–°å¢ç›¸é„°è·¯å£è³‡è¨Šï¼ˆ+8ç¶­ï¼‰
      neighbor_info = []
      for neighbor in
  get_adjacent_intersections(intersection,
  warehouse):
          neighbor_h_count =
  len(neighbor.horizontal_robots)
          neighbor_v_count =
  len(neighbor.vertical_robots)
          neighbor_info.extend([
              neighbor_h_count / 10.0,  # 
  é„°å±…æ°´å¹³æ©Ÿå™¨äººæ•¸
              neighbor_v_count / 10.0,  # 
  é„°å±…å‚ç›´æ©Ÿå™¨äººæ•¸
          ])

      # å¡«å……åˆ°å›ºå®šé•·åº¦ï¼ˆå‡è¨­æœ€å¤š4å€‹é„°å±…ï¼‰
      while len(neighbor_info) < 8:
          neighbor_info.append(0.0)

      return np.concatenate([basic_state,
  neighbor_info[:8]])

  éšæ®µ3Bï¼šå…¨å±€å”èª¿ï¼ˆé•·æœŸç›®æ¨™ï¼‰

  - ä½¿ç”¨ä¸­å¤®å”èª¿å™¨
  - å¯¦ç¾å¤šæ™ºèƒ½é«”å¼·åŒ–å­¸ç¿’ï¼ˆMARLï¼‰
  - è€ƒæ…®åœ–ç¥ç¶“ç¶²è·¯ï¼ˆGNNï¼‰æ¶æ§‹

  ---
  ğŸ¯ ç«‹å³è¡Œå‹•å»ºè­°

  å°æ–¼ç›®å‰çš„ç ”ç©¶ï¼ˆè«–æ–‡éšæ®µï¼‰ï¼š

  1. å…ˆå®ŒæˆåŸºç¤å°æ¯” âœ…
    - ç”¨ç¾æœ‰NERLæ¨¡å‹èˆ‡å…¶ä»–æ§åˆ¶å™¨æ¯”è¼ƒ
    - åœ¨è«–æ–‡ä¸­èª å¯¦è¨è«–é€™äº›é™åˆ¶
    - ä½œç‚ºfuture workæåŠæ”¹é€²æ–¹å‘
  2. å¿«é€Ÿæ”¹é€²ï¼ˆå¦‚æœæ™‚é–“å…è¨±ï¼‰ âš¡
    - å¯¦ç¾æ”¹é€²çš„çå‹µå‡½æ•¸ï¼ˆ1-2å°æ™‚å·¥ä½œé‡ï¼‰
    - é€™æœƒé¡¯è‘—æå‡çµæœçš„å­¸è¡“åƒ¹å€¼
  3. è«–æ–‡å¯«ä½œç­–ç•¥ ğŸ“
    - åœ¨limitation sectionè©³ç´°è¨è«–é€™äº›å•é¡Œ
    - åœ¨conclusionæå‡ºå…·é«”çš„future work
    - å±•ç¤ºå°å•é¡Œçš„æ·±åº¦ç†è§£

  ä½ æƒ³è¦ï¼š

  - ğŸ”¥ ç«‹å³æ”¹é€²çå‹µå‡½æ•¸ï¼Ÿï¼ˆæœ€å¤§æ”¶ç›Šï¼‰
  - ğŸ“Š ç¹¼çºŒç¾æœ‰å°æ¯”å¯¦é©—ï¼Ÿï¼ˆå®Œæˆè«–æ–‡ï¼‰
  - ğŸ§ª å¯¦é©—è‡ªé©æ‡‰æ­£è¦åŒ–ï¼Ÿï¼ˆæŠ€è¡“æ”¹é€²ï¼‰

  å‘Šè¨´æˆ‘ä½ çš„é¸æ“‡ï¼Œæˆ‘ä¾†å¹«ä½ å¯¦ç¾ï¼ ğŸš€

â— Update Todos
  â¿  â˜’ åˆ†æè³‡è¨Šå­¤å³¶å•é¡Œçš„å½±éŸ¿å’Œè§£æ±ºæ–¹æ¡ˆ
     â˜’ åˆ†æç¡¬ç·¨ç¢¼æ­£è¦åŒ–çš„å•é¡Œ
     â˜’ åˆ†æçå‹µå‡½æ•¸çš„ä¸è¶³
     â˜’ æä¾›æ”¹é€²å»ºè­°å’Œå¯¦ç¾æ–¹æ¡ˆ
