● 🧠 NERL 模型完整解析

  📊 1. 觀察空間（State/Observation）- 8維向量

  NERL 模型對每個路口觀察以下 8 個特徵：

  | 維度  | 特徵      | 範圍     | 說明                       |
  |-----|---------|--------|--------------------------|
  | 0   | 當前信號方向  | [0, 1] | 0=無方向, 0.5=垂直, 1.0=水平    |
  | 1   | 信號持續時間  | [0, 1] | 自上次切換後的時間（正規化到20
  ticks）  |
  | 2   | 水平機器人數量 | [0, 1] |
  水平方向等待的機器人數（正規化到10個）     |
  | 3   | 垂直機器人數量 | [0, 1] |
  垂直方向等待的機器人數（正規化到10個）     |
  | 4   | 水平優先比例  | [0, 1] | 水平方向delivery任務機器人佔比
   |
  | 5   | 垂直優先比例  | [0, 1] | 垂直方向delivery任務機器人佔比
   |
  | 6   | 水平等待時間  | [0, 1] | 水平方向平均等待時間（正規化到50
  ticks） |
  | 7   | 垂直等待時間  | [0, 1] | 垂直方向平均等待時間（正規化到50
  ticks） |

  🎮 2. 動作空間（Action）- 3個離散動作

  | 動作編碼 | 動作含義   | 效果          |
  |------|--------|-------------|
  | 0    | 保持當前方向 | 維持目前的交通燈狀態  |
  | 1    | 切換到垂直  | 允許垂直方向機器人通行 |
  | 2    | 切換到水平  | 允許水平方向機器人通行 |

  🎯 3. 獎勵函數（Fitness）- 能源效率導向

  適應度 = 能源效率 - 停止啟動懲罰

  具體計算：
  - 能源效率 = 完成訂單數 / (總能源消耗 + 1e-6)
  - 停止啟動懲罰 = 0.01 × 停止啟動次數

  目標：
  - ✅ 最大化：訂單完成效率
  - ✅ 最小化：能源消耗
  - ✅ 最小化：交通不穩定性

  🔧 4. NERL 模型的能力範圍

  ✅ 能做到的事情：

  1. 智能交通控制：
    - 感知每個路口的即時交通狀況
    - 考慮機器人任務優先級（delivery > return > take > idle）
    - 平衡等待時間與能源效率
  2. 自適應學習：
    - 通過神經進化算法自動優化決策策略
    - 無需手動調參，自動發現最佳控制策略
    - 適應不同的倉儲負載和交通模式
  3. 多目標優化：
    - 同時考慮訂單完成率、能源消耗、交通穩定性
    - 避免頻繁的信號切換（減少stop_and_go）

  ⚠️ 限制與挑戰：

  1. 資訊孤島問題：
    - 每個路口獨立決策，無法看到相鄰路口狀況
    - 可能導致區域性交通協調不佳
  2. 硬編碼正規化：
    - 狀態特徵使用固定的正規化參數（如最多10個機器人）
    - 可能無法適應極端交通狀況
  3. 獎勵函數簡化：
    - 目前只考慮能源效率和停止啟動
    - 未考慮機器人等待時間的公平性

  📈 實際表現分析（從你的測試結果）：

  - 適應度進步：從 -0.44 提升到 -0.33（25%改善）
  - 負值解釋：由於能源消耗通常大於完成訂單數，所以適應度為負值
  - 改善趨勢：顯示 NERL 確實在學習更好的交通控制策略

  🎯 5. 與其他控制器的差異

  | 控制器         | 決策依據   | 學習能力   | 優勢        | 劣勢
     |
  |-------------|--------|--------|-----------|-----------|
  | Time-based  | 固定時間週期 | ❌ 無    | 簡單穩定      |
  無視交通狀況    |
  | Queue-based | 啟發式規則  | ❌ 無    | 考慮車流量     |
  固定偏向、可能飢餓 |
  | DQN         | 深度Q學習  | ✅ 梯度學習 | 樣本效率高     |
  需要經驗回放    |
  | NERL        | 神經進化   | ✅ 進化學習 | 無需梯度、全局搜索 |
  樣本效率較低    |

  🚀 總結

  NERL 模型是一個能夠：
  - 🧠 感知8維交通狀態特徵
  - 🎮 執行3種交通控制動作
  - 🎯 優化能源效率與交通穩定性
  - 📈 學習並自動改進控制策略

  適合用於：需要自適應、無需人工調參的交通控制場景！